<section class="relative border-x border-border">
  <span class="section-label">CLI</span>

  <div class="border-b border-dashed border-border px-8 pt-16 pb-16 md:px-16 md:pt-24 md:pb-24">
    <h2 class="text-2xl font-semibold tracking-tight md:text-4xl lg:text-5xl">
      Simple CLI.
      <br />
      <span class="text-muted">Run, checkpoint, restore.</span>
    </h2>

    <div class="mt-12 grid gap-0 border border-border md:grid-cols-[1fr_1.6fr]">
      <!-- Feature tabs (left) -->
      <div class="border-b border-border md:border-b-0 md:border-r" id="cli-tabs">
        <a
          href="#ephemeral-runs"
          class="cli-tab block border-b border-border p-5 md:p-6"
          data-hash="ephemeral-runs"
        >
          <div class="mb-1 font-mono text-[10px] uppercase tracking-widest text-dim">feature</div>
          <h3 class="text-sm font-semibold">Ephemeral runs</h3>
          <p class="mt-1 text-xs leading-relaxed text-muted">
            Boot a fresh VM with a single command. Changes vanish on exit.
          </p>
        </a>
        <a
          href="#networking"
          class="cli-tab block border-b border-border p-5 md:p-6"
          data-hash="networking"
        >
          <h3 class="text-sm font-semibold">Opt-in networking</h3>
          <p class="mt-1 text-xs leading-relaxed text-muted">
            Sandboxes are offline by default. Enable NAT with one flag.
          </p>
        </a>
        <a
          href="#resources"
          class="cli-tab block border-b border-border p-5 md:p-6"
          data-hash="resources"
        >
          <h3 class="text-sm font-semibold">Configurable resources</h3>
          <p class="mt-1 text-xs leading-relaxed text-muted">
            Set CPUs, memory, and disk size per run or in a config file.
          </p>
        </a>
        <a
          href="#checkpoints"
          class="cli-tab block p-5 md:p-6"
          data-hash="checkpoints"
        >
          <h3 class="text-sm font-semibold">Checkpoint & restore</h3>
          <p class="mt-1 text-xs leading-relaxed text-muted">
            Save environments as snapshots. Branch and reuse across runs.
          </p>
        </a>
      </div>

      <!-- Terminal (right) -->
      <div class="flex flex-col">
        <div class="flex items-center gap-2 border-b border-border px-4 py-2.5">
          <span class="h-2.5 w-2.5 border border-[#ff5f57] bg-[#ff5f57]/20"></span>
          <span class="h-2.5 w-2.5 border border-[#febc2e] bg-[#febc2e]/20"></span>
          <span class="h-2.5 w-2.5 border border-[#28c840] bg-[#28c840]/20"></span>
          <span class="ml-2 font-mono text-[10px] text-dim">terminal</span>
        </div>
        <div class="relative flex-1" id="cli-terminal">
          <div class="cli-panel p-5 font-mono text-xs leading-[1.8] md:p-6 md:text-sm" data-hash="ephemeral-runs">
            <p><span class="text-dim">$</span> <span class="text-text">shuru run -- echo "hello from the sandbox"</span></p>
            <p class="text-amber">hello from the sandbox</p>
            <br />
            <p><span class="text-dim">$</span> <span class="text-text">shuru run -- cat /etc/os-release | head -1</span></p>
            <p class="text-amber">NAME="Alpine Linux"</p>
            <br />
            <p class="text-muted"># VM boots, runs, and tears down â€” nothing persists.</p>
          </div>

          <div class="cli-panel p-5 font-mono text-xs leading-[1.8] md:p-6 md:text-sm" data-hash="networking">
            <p><span class="text-dim">$</span> <span class="text-text">shuru run -- ping -c1 8.8.8.8</span></p>
            <p class="text-red-400">ping: sendto: Operation not permitted</p>
            <br />
            <p><span class="text-dim">$</span> <span class="text-text">shuru run --allow-net -- apk add python3</span></p>
            <p class="text-muted">fetch https://dl-cdn.alpinelinux.org/...</p>
            <p class="text-amber">OK: 45 MiB in 28 packages</p>
          </div>

          <div class="cli-panel p-5 font-mono text-xs leading-[1.8] md:p-6 md:text-sm" data-hash="resources">
            <p><span class="text-dim">$</span> <span class="text-text">shuru run --cpus 4 --memory 4096 -- free -m | head -2</span></p>
            <p class="text-muted">              total        used        free</p>
            <p class="text-amber">Mem:          4096          38        4002</p>
            <br />
            <p><span class="text-dim">$</span> <span class="text-text">shuru run --disk-size 2048 -- df -h /</span></p>
            <p class="text-amber">Filesystem      Size  Used Avail Use% Mounted on</p>
            <p class="text-amber">/dev/vda        2.0G   18M  1.9G   1% /</p>
          </div>

          <div class="cli-panel p-5 font-mono text-xs leading-[1.8] md:p-6 md:text-sm" data-hash="checkpoints">
            <p><span class="text-dim">$</span> <span class="text-text">shuru checkpoint create myenv -- sh -c 'apk add nodejs npm'</span></p>
            <p class="text-amber">shuru: checkpoint 'myenv' saved</p>
            <br />
            <p><span class="text-dim">$</span> <span class="text-text">shuru run --from myenv -- node -e 'console.log("ready")'</span></p>
            <p class="text-amber">ready</p>
            <br />
            <p class="text-muted"># Restore any checkpoint instantly. Branch and reuse.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .cli-tab {
    cursor: pointer;
    transition: background-color 0.15s ease, border-color 0.15s ease;
    border-left: 2px solid transparent;
    text-decoration: none;
    color: inherit;
  }

  .cli-tab:hover {
    background: rgba(255, 255, 255, 0.02);
  }

  .cli-tab.active {
    border-left-color: var(--color-amber, #f59e0b);
    background: rgba(255, 255, 255, 0.03);
  }

  .cli-panel {
    display: none;
    animation: panelFade 0.2s ease;
  }

  .cli-panel.active {
    display: block;
  }

  @keyframes panelFade {
    from { opacity: 0; }
    to { opacity: 1; }
  }
</style>

<script>
  const VALID_HASHES = ['ephemeral-runs', 'networking', 'resources', 'checkpoints'];
  const DEFAULT_HASH = 'ephemeral-runs';

  function activate(hash: string) {
    if (!VALID_HASHES.includes(hash)) hash = DEFAULT_HASH;

    document.querySelectorAll('.cli-tab').forEach((t) => t.classList.remove('active'));
    document.querySelectorAll('.cli-panel').forEach((p) => p.classList.remove('active'));

    document.querySelector(`.cli-tab[data-hash="${hash}"]`)?.classList.add('active');
    document.querySelector(`.cli-panel[data-hash="${hash}"]`)?.classList.add('active');
  }

  // Activate on load from current hash
  activate(window.location.hash.replace('#', '') || DEFAULT_HASH);

  // Respond to back/forward navigation
  window.addEventListener('hashchange', () => {
    activate(window.location.hash.replace('#', '') || DEFAULT_HASH);
  });
</script>
