---
import Layout from "../layouts/Layout.astro";
---

<Layout title="shuru - Local-first microVM sandbox for AI agents">
  <div class="dot-grid min-h-screen">
    <!-- ===== NAV ===== -->
    <nav class="fixed top-0 z-50 w-full border-b border-border bg-bg/90 backdrop-blur-md">
      <div class="mx-auto flex max-w-6xl items-center justify-between px-6 py-4">
        <a href="/" class="font-mono text-lg font-semibold tracking-tight text-text">
          shuru
        </a>
        <div class="flex items-center gap-5">
          <a
            href="https://github.com/superhq-ai/shuru"
            target="_blank"
            rel="noopener"
            class="text-muted transition-colors hover:text-text"
            aria-label="GitHub"
          >
            <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0 0 24 12c0-6.63-5.37-12-12-12z" />
            </svg>
          </a>
          <a
            href="#get-started"
            class="border border-amber px-4 py-1.5 font-mono text-xs font-medium text-amber transition-colors hover:bg-amber hover:text-bg"
          >
            GET STARTED
          </a>
        </div>
      </div>
    </nav>

    <main class="mx-auto max-w-6xl px-6">
      <!-- ===== HERO ===== -->
      <section class="relative border-x border-border pt-28 pb-0 md:pt-40">
        <span class="section-label">Hero</span>

        <div class="border-b border-dashed border-border px-8 pb-16 pt-8 md:px-16 md:pb-24 md:pt-12">
          <h1 class="text-4xl font-semibold leading-tight tracking-tight md:text-6xl lg:text-7xl">
            Local-First Sandboxes
            <br />
            <span class="text-muted">for AI Agents on macOS.</span>
          </h1>

          <p class="mt-6 max-w-xl text-base text-muted md:text-lg">
            Lightweight Linux VMs powered by Apple Virtualization.framework.
            Ephemeral by default. No Docker required.
          </p>

          <div class="mt-10 flex flex-col items-start gap-4 sm:flex-row sm:items-center sm:gap-6">
            <a
              href="#get-started"
              class="border border-amber bg-amber px-5 py-2 font-mono text-xs font-medium text-bg transition-colors hover:bg-transparent hover:text-amber"
            >
              GET STARTED
            </a>
            <a
              href="https://github.com/superhq-ai/shuru"
              target="_blank"
              rel="noopener"
              class="border border-border px-5 py-2 font-mono text-xs font-medium text-muted transition-colors hover:border-text hover:text-text"
            >
              GITHUB
            </a>
          </div>

        </div>
      </section>

      <!-- ===== FEATURES ===== -->
      <section class="relative border-x border-border">
        <span class="section-label">Features</span>

        <div class="border-b border-dashed border-border px-8 pt-16 pb-0 md:px-16 md:pt-24">
          <h2 class="text-2xl font-semibold tracking-tight md:text-4xl lg:text-5xl">
            Fast, Ephemeral, Stateful.
            <br />
            <span class="text-muted">Infrastructure for AI Agents.</span>
          </h2>

          <!-- Feature cards â€” connected grid, shared borders -->
          <div class="mt-12 grid border border-border md:grid-cols-3">
            <!-- Card 1: Ephemeral -->
            <div class="flex flex-col border-b border-border p-6 md:border-b-0 md:border-r md:p-8">
              <div class="mb-3 font-mono text-[10px] uppercase tracking-widest text-dim">01</div>
              <h3 class="text-base font-semibold md:text-lg">Ephemeral by Default</h3>
              <p class="mt-2 text-sm leading-relaxed text-muted">
                Every run starts from a clean rootfs. Install anything, break anything.
                Nothing persists unless you save it.
              </p>
              <div class="mt-6 flex-1">
                <!--
                  ILLUSTRATION: Ephemeral card
                  Prompt: "Abstract geometric line-art illustration showing a container outline shattering into dissolving particles from right to left. Thin amber (#f59e0b) lines on dark background (#0a0a0a). Dot grid visible behind. Sharp edges, no rounded corners, technical blueprint style. No text. 400x300px."
                  Place at: public/images/card-ephemeral.webp
                -->
                <img src="/images/card-ephemeral.svg" alt="Ephemeral container dissolving" class="w-full" />
              </div>
            </div>

            <!-- Card 2: Checkpoints -->
            <div class="flex flex-col border-b border-border p-6 md:border-b-0 md:border-r md:p-8">
              <div class="mb-3 font-mono text-[10px] uppercase tracking-widest text-dim">02</div>
              <h3 class="text-base font-semibold md:text-lg">Checkpoints</h3>
              <p class="mt-2 text-sm leading-relaxed text-muted">
                Save disk state as named snapshots. Restore, branch, and iterate.
                Like git commits for your environment.
              </p>
              <div class="mt-6 flex-1">
                <!--
                  ILLUSTRATION: Checkpoints card
                  Prompt: "Abstract geometric line-art diagram of a branching tree structure like a git DAG, with glowing amber (#f59e0b) checkpoint nodes and thin connecting lines. One trunk splits into two branches, each with 2-3 nodes. Dark background (#0a0a0a), sharp edges, blueprint technical style. No text. 400x300px."
                  Place at: public/images/card-checkpoints.webp
                -->
                <img src="/images/card-checkpoints.svg" alt="Git DAG branching checkpoint tree" class="w-full" />
              </div>
            </div>

            <!-- Card 3: Apple Silicon Native -->
            <div class="flex flex-col p-6 md:p-8">
              <div class="mb-3 font-mono text-[10px] uppercase tracking-widest text-dim">03</div>
              <h3 class="text-base font-semibold md:text-lg">Apple Silicon Native</h3>
              <p class="mt-2 text-sm leading-relaxed text-muted">
                Built on Virtualization.framework. No emulation layer, no Docker dependency.
                Near-native speed on ARM64.
              </p>
              <div class="mt-6 flex-1">
                <!--
                  ILLUSTRATION: Native card
                  Prompt: "Abstract minimal line-art of a chip/processor outline with a lightning bolt in the center, surrounded by thin radiating circuit-trace lines. Dark background (#0a0a0a), amber (#f59e0b) glow on the bolt and traces. Sharp edges, technical blueprint style. No text. 400x300px."
                  Place at: public/images/card-native.webp
                -->
                <img src="/images/card-native.svg" alt="Apple Silicon chip with lightning bolt" class="w-full" />
              </div>
            </div>
          </div>

          <!-- Spacing annotation -->
          <div class="flex items-center gap-2 py-6">
            <span class="measure">grid: 3 cols</span>
            <div class="h-px flex-1 border-t border-dashed border-dim"></div>
          </div>
        </div>
      </section>

      <!-- ===== CODE SECTION ===== -->
      <section class="relative border-x border-border">
        <span class="section-label">CLI</span>

        <div class="border-b border-dashed border-border px-8 pt-16 pb-16 md:px-16 md:pt-24 md:pb-24">
          <h2 class="text-2xl font-semibold tracking-tight md:text-4xl lg:text-5xl">
            Simple CLI.
            <br />
            <span class="text-muted">Run, checkpoint, restore.</span>
          </h2>

          <div class="mt-12 grid gap-0 border border-border md:grid-cols-[1fr_1.6fr]">
            <!-- Feature list (left) -->
            <div class="border-b border-border md:border-b-0 md:border-r">
              <div class="border-b border-border p-5 md:p-6">
                <div class="mb-1 font-mono text-[10px] uppercase tracking-widest text-dim">feature</div>
                <h3 class="text-sm font-semibold">Ephemeral runs</h3>
                <p class="mt-1 text-xs leading-relaxed text-muted">
                  Boot a fresh VM with a single command. Changes vanish on exit.
                </p>
              </div>
              <div class="border-b border-border p-5 md:p-6">
                <h3 class="text-sm font-semibold">Opt-in networking</h3>
                <p class="mt-1 text-xs leading-relaxed text-muted">
                  Sandboxes are offline by default. Enable NAT with one flag.
                </p>
              </div>
              <div class="border-b border-border p-5 md:p-6">
                <h3 class="text-sm font-semibold">Configurable resources</h3>
                <p class="mt-1 text-xs leading-relaxed text-muted">
                  Set CPUs, memory, and disk size per run or in a config file.
                </p>
              </div>
              <div class="p-5 md:p-6">
                <h3 class="text-sm font-semibold">Checkpoint & restore</h3>
                <p class="mt-1 text-xs leading-relaxed text-muted">
                  Save environments as snapshots. Branch and reuse across runs.
                </p>
              </div>
            </div>

            <!-- Terminal (right) -->
            <div class="flex flex-col">
              <div class="flex items-center gap-2 border-b border-border px-4 py-2.5">
                <span class="h-2.5 w-2.5 border border-[#ff5f57] bg-[#ff5f57]/20"></span>
                <span class="h-2.5 w-2.5 border border-[#febc2e] bg-[#febc2e]/20"></span>
                <span class="h-2.5 w-2.5 border border-[#28c840] bg-[#28c840]/20"></span>
                <span class="ml-2 font-mono text-[10px] text-dim">terminal</span>
              </div>
              <div class="flex-1 p-5 font-mono text-xs leading-[1.8] md:p-6 md:text-sm">
                <p><span class="text-dim">$</span> <span class="text-text">shuru run -- echo "hello from the sandbox"</span></p>
                <p class="text-amber">hello from the sandbox</p>
                <br />
                <p><span class="text-dim">$</span> <span class="text-text">shuru run --allow-net -- apk add python3</span></p>
                <p class="text-muted">OK: 45 MiB in 28 packages</p>
                <br />
                <p><span class="text-dim">$</span> <span class="text-text">shuru checkpoint create myenv -- sh -c 'apk add nodejs npm'</span></p>
                <p class="text-amber">shuru: checkpoint 'myenv' saved</p>
                <br />
                <p><span class="text-dim">$</span> <span class="text-text">shuru run --from myenv -- node -e 'console.log("ready")'</span></p>
                <p class="text-amber">ready</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ===== USE CASES ===== -->
      <section class="relative border-x border-border">
        <span class="section-label">Use Cases</span>

        <div class="border-b border-dashed border-border px-8 pt-16 pb-16 md:px-16 md:pt-24 md:pb-24">
          <div class="flex items-end justify-between">
            <h2 class="text-2xl font-semibold tracking-tight md:text-4xl lg:text-5xl">
              Built for Agents.
              <br />
              <span class="text-muted">Safe execution for any workload.</span>
            </h2>
            <div class="hidden gap-1 md:flex">
              <button
                id="carousel-prev"
                class="flex h-8 w-8 items-center justify-center border border-border text-dim transition-colors hover:border-muted hover:text-muted"
                aria-label="Previous"
              >
                <svg class="h-3.5 w-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="square" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
              </button>
              <button
                id="carousel-next"
                class="flex h-8 w-8 items-center justify-center border border-border text-dim transition-colors hover:border-muted hover:text-muted"
                aria-label="Next"
              >
                <svg class="h-3.5 w-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="square" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
              </button>
            </div>
          </div>

          <div id="carousel" class="carousel mt-12 flex gap-0 overflow-x-auto scroll-smooth border border-border">
            <!-- Code Execution -->
            <div class="flex min-w-[260px] flex-col border-r border-border md:min-w-[300px]">
              <div class="p-5 md:p-6">
                <div class="mb-2 font-mono text-[10px] uppercase tracking-widest text-dim">01</div>
                <h3 class="font-mono text-sm font-medium">Code Execution</h3>
                <p class="mt-2 text-xs leading-relaxed text-muted">
                  Run AI-generated code in isolated VMs with real-time output.
                </p>
              </div>
              <div class="mt-auto p-5 pt-0 md:p-6 md:pt-0">
                <!--
                  ILLUSTRATION: Code Execution use case
                  Prompt: "Abstract minimal line-art illustration of a terminal window with code brackets and a play button, connected to an output stream below. Dark background (#0a0a0a), thin amber (#f59e0b) and gray (#333) lines. Geometric, schematic blueprint style, sharp edges. No text. 300x250px."
                  Place at: public/images/usecase-code.webp
                -->
                <img src="/images/usecase-code.svg" alt="Terminal with code execution" class="w-full" />
              </div>
            </div>

            <!-- Tool Use -->
            <div class="flex min-w-[260px] flex-col border-r border-border md:min-w-[300px]">
              <div class="p-5 md:p-6">
                <div class="mb-2 font-mono text-[10px] uppercase tracking-widest text-dim">02</div>
                <h3 class="font-mono text-sm font-medium">Tool Use</h3>
                <p class="mt-2 text-xs leading-relaxed text-muted">
                  Let agents install packages, compile code, and use system tools safely.
                </p>
              </div>
              <div class="mt-auto p-5 pt-0 md:p-6 md:pt-0">
                <!--
                  ILLUSTRATION: Tool Use use case
                  Prompt: "Abstract minimal line-art illustration of interlocking gear outlines and a wrench, with small package/box icons flowing in. Dark background (#0a0a0a), thin amber (#f59e0b) and gray (#333) lines. Geometric, schematic blueprint style, sharp edges. No text. 300x250px."
                  Place at: public/images/usecase-tools.webp
                -->
                <img src="/images/usecase-tools.svg" alt="Gears and package installation" class="w-full" />
              </div>
            </div>

            <!-- Evaluations -->
            <div class="flex min-w-[260px] flex-col border-r border-border md:min-w-[300px]">
              <div class="p-5 md:p-6">
                <div class="mb-2 font-mono text-[10px] uppercase tracking-widest text-dim">03</div>
                <h3 class="font-mono text-sm font-medium">Evaluations</h3>
                <p class="mt-2 text-xs leading-relaxed text-muted">
                  Spin up parallel sandboxes for reproducible evals across environments.
                </p>
              </div>
              <div class="mt-auto p-5 pt-0 md:p-6 md:pt-0">
                <!--
                  ILLUSTRATION: Evaluations use case
                  Prompt: "Abstract minimal line-art illustration of 4 parallel VM boxes in a row, each with a small checkmark, connected to a single results node below. Dark background (#0a0a0a), thin amber (#f59e0b) and gray (#333) lines. Geometric, schematic blueprint style, sharp edges. No text. 300x250px."
                  Place at: public/images/usecase-evals.webp
                -->
                <img src="/images/usecase-evals.svg" alt="Parallel evaluation pipeline" class="w-full" />
              </div>
            </div>

            <!-- Development -->
            <div class="flex min-w-[260px] flex-col md:min-w-[300px]">
              <div class="p-5 md:p-6">
                <div class="mb-2 font-mono text-[10px] uppercase tracking-widest text-dim">04</div>
                <h3 class="font-mono text-sm font-medium">Development</h3>
                <p class="mt-2 text-xs leading-relaxed text-muted">
                  Disposable Linux environments for testing, debugging, and prototyping.
                </p>
              </div>
              <div class="mt-auto p-5 pt-0 md:p-6 md:pt-0">
                <!--
                  ILLUSTRATION: Development use case
                  Prompt: "Abstract minimal line-art illustration of a laptop outline with a floating sandbox container above it, connected by dotted lines. Dark background (#0a0a0a), thin amber (#f59e0b) and gray (#333) lines. Geometric, schematic blueprint style, sharp edges. No text. 300x250px."
                  Place at: public/images/usecase-dev.webp
                -->
                <img src="/images/usecase-dev.svg" alt="Laptop with floating sandbox" class="w-full" />
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ===== GET STARTED ===== -->
      <section id="get-started" class="relative border-x border-border">
        <span class="section-label">Install</span>

        <div class="px-8 pt-16 pb-16 md:px-16 md:pt-24 md:pb-24">
          <div class="text-center">
            <h2 class="text-2xl font-semibold tracking-tight md:text-4xl lg:text-5xl">
              Get started in seconds.
            </h2>
            <p class="mt-4 text-base text-muted">
              One command to install. One command to run.
            </p>
          </div>

          <div class="mx-auto mt-12 max-w-2xl border border-border">
            <div class="flex items-center gap-2 border-b border-border px-4 py-2.5">
              <span class="h-2.5 w-2.5 border border-[#ff5f57] bg-[#ff5f57]/20"></span>
              <span class="h-2.5 w-2.5 border border-[#febc2e] bg-[#febc2e]/20"></span>
              <span class="h-2.5 w-2.5 border border-[#28c840] bg-[#28c840]/20"></span>
              <span class="ml-2 font-mono text-[10px] text-dim">terminal</span>
            </div>
            <div class="relative p-5 font-mono text-xs leading-[1.8] md:p-6 md:text-sm">
              <button
                id="copy-install"
                class="absolute top-4 right-4 flex h-7 w-7 items-center justify-center border border-border text-dim transition-colors hover:border-muted hover:text-muted"
                aria-label="Copy install command"
              >
                <svg id="copy-icon" class="h-3.5 w-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                  <rect x="9" y="9" width="13" height="13" rx="0" />
                  <path d="M5 15H4a1 1 0 01-1-1V4a1 1 0 011-1h10a1 1 0 011 1v1" />
                </svg>
                <svg id="check-icon" class="hidden h-3.5 w-3.5 text-amber" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                  <path d="M5 13l4 4L19 7" />
                </svg>
              </button>
              <p class="text-dim"># Install</p>
              <p>
                <span class="text-dim">$</span>
                <span class="text-text"> curl -fsSL https://raw.githubusercontent.com/superhq-ai/shuru/main/install.sh | sh</span>
              </p>
              <br />
              <p class="text-dim"># Run your first sandbox</p>
              <p>
                <span class="text-dim">$</span>
                <span class="text-text"> shuru run</span>
              </p>
            </div>
          </div>

        </div>
      </section>
    </main>

    <!-- ===== FOOTER ===== -->
    <footer class="mx-auto max-w-6xl border border-border">
      <div class="flex flex-col items-center justify-between gap-4 px-8 py-6 sm:flex-row md:px-16">
        <span class="font-mono text-xs text-dim">Built with Rust</span>
        <div class="flex items-center gap-6">
          <a
            href="https://github.com/superhq-ai/shuru"
            target="_blank"
            rel="noopener"
            class="font-mono text-xs text-dim transition-colors hover:text-muted"
          >
            GitHub
          </a>
          <a
            href="https://github.com/superhq-ai/shuru/issues"
            target="_blank"
            rel="noopener"
            class="font-mono text-xs text-dim transition-colors hover:text-muted"
          >
            Issues
          </a>
        </div>
      </div>
    </footer>

    <!-- Bottom spacing -->
    <div class="h-12"></div>
  </div>

  <!-- Copy button JS -->
  <script>
    const copyBtn = document.getElementById("copy-install");
    const copyIcon = document.getElementById("copy-icon");
    const checkIcon = document.getElementById("check-icon");

    copyBtn?.addEventListener("click", async () => {
      const text = "curl -fsSL https://raw.githubusercontent.com/superhq-ai/shuru/main/install.sh | sh";
      await navigator.clipboard.writeText(text);
      copyIcon?.classList.add("hidden");
      checkIcon?.classList.remove("hidden");
      setTimeout(() => {
        copyIcon?.classList.remove("hidden");
        checkIcon?.classList.add("hidden");
      }, 2000);
    });
  </script>

  <!-- Carousel JS -->
  <script>
    const carousel = document.getElementById("carousel");
    const prev = document.getElementById("carousel-prev");
    const next = document.getElementById("carousel-next");
    const scrollAmount = 300;

    prev?.addEventListener("click", () => {
      carousel?.scrollBy({ left: -scrollAmount, behavior: "smooth" });
    });
    next?.addEventListener("click", () => {
      carousel?.scrollBy({ left: scrollAmount, behavior: "smooth" });
    });
  </script>
</Layout>
